WARNING:Bus.vdmpp:5001:17,20:Instance variable 'currentRoad' is not initialized.
RESULT:result:-1:-1,-1:class Busprivate instance variable seats'set of (Passenger)private invariant inv_Bus'boolprivate instance variable line'natprivate instance variable route'seq of (Road)private instance variable curRoute'seq of (Road)private instance variable nextWP'Waypointprivate instance variable currentRoad'Roadprivate instance variable wps'seq of (Waypoint)public explicit operation Bus(nat, seq of (Road), seq of (Waypoint))'(nat * seq of (Road) * seq of (Waypoint) ==> Bus)public explicit operation GetOn(set of (Passenger))'(set of (Passenger) ==> ())public explicit operation GotOff(set of (Passenger))'(set of (Passenger) ==> ())public explicit operation GetWaypoints()'(() ==> seq of (Waypoint))public explicit operation GetStops()'(() ==> seq of (Busstop))private explicit operation NextWaypoint()'(() ==> Waypoint)public explicit operation WaitForThreadStart()'(() ==> ())private explicit operation ThreadStarted()'(() ==> ())private permission predicate 'boolprivate permission predicate 'boolprotected thread thread'?private explicit operation SelectSubset(set of (Passenger), nat)'(set of (Passenger) * nat ==> set of (Passenger))end Busclass Printerstatic public explicit operation Out(seq of (char))'(seq of (char) ==> ())static public explicit operation natToString(nat)'(nat ==> seq of (char))static public explicit operation OutWithTS(seq of (char))'(seq of (char) ==> ())static public explicit operation intToString(int)'(int ==> seq of (char))end Printerclass VDMUtilstatic public explicit function set2seq(set of (@T))'(set of (@T) +> seq of (@T))static public explicit function get_file_pos()'(() +> [(seq of (char) * nat * nat * seq of (char) * seq of (char))])static public explicit function val2seq_of_char(@T)'(@T +> seq of (char))static public explicit function seq_of_char2val(seq1 of (char))'(seq1 of (char) -> (bool * [@p]))static public explicit function classname(@T)'(@T -> [seq1 of (char)])end VDMUtilclass Waypointstatic public type BusStops'BusStopsstatic public type WaypointsEnum'WaypointsEnumprotected instance variable id'WaypointsEnumprotected instance variable isStop'boolpublic explicit operation Waypoint(WaypointsEnum)'(WaypointsEnum ==> Waypoint)public explicit operation GetId()'(() ==> WaypointsEnum)public explicit operation IsStop()'(() ==> bool)end Waypointclass Worldstatic public instance variable graphics'gui_Graphicsstatic public instance variable env'[Environment]static public instance variable timerRef'TimeStamppublic explicit operation World()'(() ==> World)public explicit operation Run()'(() ==> ())end Worldclass Configstatic public value BusCapacity'natstatic public value DefaultRoadSpeedLimit'natstatic public value PassengerAnnoyanceLimit'natstatic public value MaxInflow'natend Configclass Typesstatic public type Time'Timestatic public type Direction'Directionstatic public type Event'Eventstatic public type BusRoute'BusRoutestatic public type Inflow'Inflowstatic public type Simulate'Simulatestatic public type WasteTime'WasteTimestatic public explicit function DirectionToGraphics(Direction)'(Direction -> nat)end Typesclass WaitNotifyprivate instance variable waitset'set of (nat)public explicit operation Wait()'(() ==> ())public explicit operation Notify()'(() ==> ())public explicit operation NotifyThread(nat)'(nat ==> ())public explicit operation NotifyAll()'(() ==> ())private explicit operation AddToWaitSet(nat)'(nat ==> ())private explicit operation Awake()'(() ==> ())private permission predicate 'boolprivate mutex predicate '?end WaitNotifyclass Roadstatic public type RoadNumber'RoadNumberprivate instance variable roadNmbr'RoadNumberprivate instance variable roadLength'natprivate instance variable speedlimit'natprivate instance variable wps'set of (Waypoint)private instance variable timePenalty'natprivate invariant inv_Road'boolpublic explicit operation Road(RoadNumber, set of (Waypoint), nat)'(RoadNumber * set of (Waypoint) * nat ==> Road)public explicit operation Road(RoadNumber, set of (Waypoint), nat, nat)'(RoadNumber * set of (Waypoint) * nat * nat ==> Road)public explicit operation Covers(set of (Waypoint))'(set of (Waypoint) ==> bool)public explicit operation GetWaypoints()'(() ==> set of (Waypoint))public explicit operation OppositeEnd(Waypoint)'(Waypoint ==> Waypoint)public explicit operation GetSpeedLimit()'(() ==> nat)public explicit operation GetLength()'(() ==> nat)public explicit operation GetRoadNumber()'(() ==> RoadNumber)public explicit operation GetTimePenalty()'(() ==> nat)end Roadclass ClockTickprotected thread thread'?end ClockTickclass Passengerstatic private instance variable nextPassengerId'natprivate instance variable passengerId'natprivate instance variable goal'Waypointprivate invariant inv_Passenger'boolprivate instance variable annoyanceLimit'natprivate instance variable pickedUp'boolprivate instance variable alreadyAnnoyed'boolpublic explicit operation Passenger(Busstop)'(Busstop ==> Passenger)public explicit operation GetDestination()'(() ==> Waypoint)public explicit operation GotOnBus()'(() ==> ())public explicit operation IsAnnoyedOfWaiting()'(() ==> bool)public explicit operation AnnoyedOfWaiting()'(() ==> ())public explicit operation Id()'(() ==> nat)private explicit operation GetNextId()'(() ==> nat)private mutex predicate '?end Passengerclass TimeStampstatic public value stepLength'natprivate instance variable currentTime'natprivate instance variable wakeUpMap'map (nat) to (nat)public explicit operation WaitRelative(nat)'(nat ==> ())public explicit operation WaitAbsolute(nat)'(nat ==> ())private explicit operation AddToWakeUpMap(nat, nat)'(nat * nat ==> ())public explicit operation NotifyThread(nat)'(nat ==> ())public explicit operation NotifyAll()'(() ==> ())public explicit operation NotifyAndIncTime()'(() ==> ())public explicit operation GetTime()'(() ==> nat)public explicit operation Awake()'(() ==> ())private permission predicate 'boolprivate permission predicate 'boolprivate mutex predicate '?private mutex predicate '?private mutex predicate '?end TimeStampclass IOstatic public type filedirective'filedirectivestatic public explicit function writeval(@p)'(@p -> bool)static public explicit function fwriteval(seq1 of (char), @p, filedirective)'(seq1 of (char) * @p * filedirective -> bool)static public explicit function freadval(seq1 of (char))'(seq1 of (char) -> (bool * [@p]))public explicit operation echo(seq of (char))'(seq of (char) ==> bool)public explicit operation fecho(seq of (char), seq of (char), [filedirective])'(seq of (char) * seq of (char) * [filedirective] ==> bool)public explicit operation ferror()'(() ==> seq of (char))static public explicit operation print(?)'(? ==> ())static public explicit operation println(?)'(? ==> ())static public explicit operation printf(seq of (char), seq of (?))'(seq of (char) * seq of (?) ==> ())end IOclass MATHstatic public explicit function sin(real)'(real +> real)static public explicit function cos(real)'(real +> real)static public explicit function tan(real)'(real -> real)static public explicit function cot(real)'(real -> real)static public explicit function asin(real)'(real -> real)static public explicit function acos(real)'(real -> real)static public explicit function atan(real)'(real +> real)static public explicit function acot(real)'(real +> real)static public explicit function sqrt(real)'(real -> real)static public explicit function pi_f()'(() +> real)static public explicit operation srand(int)'(int ==> ())static public explicit operation rand(int)'(int ==> int)static public explicit operation srand2(int)'(int ==> int)static public explicit function exp(real)'(real +> real)static public explicit function ln(real)'(real -> real)static public explicit function log(real)'(real -> real)static public explicit function fac(nat)'(nat -> nat1)static public value pi'realend MATHclass Environmentpublic instance variable city'Cityprivate instance variable io'IOprivate instance variable inlines'seq of (inline)private instance variable outlines'seq of (char)private instance variable busy'boolprivate instance variable simulating'boolprivate instance variable passengersTransported'natprivate instance variable passengersAnnoyed'natprivate instance variable passengersCount'natprivate instance variable passengersAnnoyedStops'map (WaypointsEnum) to (nat)static private type inline'inlinestatic private type InputTP'InputTPpublic explicit operation Environment(seq of (char))'(seq of (char) ==> Environment)private explicit operation BuildCityMap()'(() ==> ())public explicit operation Events()'(() ==> ())public explicit operation handleEvent(seq of (char))'(seq of (char) ==> ())private explicit operation SetInflow(nat)'(nat ==> ())public explicit operation IncreaseInflow()'(() ==> ())public explicit operation DecreaseInflow()'(() ==> ())public explicit operation TransportedPassengers(nat)'(nat ==> ())public explicit operation AnnoyedPassenger(nat, WaypointsEnum)'(nat * WaypointsEnum ==> ())public explicit operation PassengerCount()'(() ==> ())public explicit operation report()'(() ==> ())public explicit operation isFinished()'(() ==> ())public explicit operation goEnvironment()'(() ==> ())public explicit operation run()'(() ==> ())protected thread thread'?private permission predicate 'boolprivate mutex predicate '?end Environmentclass Cityprivate instance variable wayspoints'set of (Waypoint)private instance variable stops'inmap of (BusStops) to (Busstop)private instance variable roads'inmap of (RoadNumber) to (Road)private instance variable buses'inmap of (nat) to (Bus)private instance variable central'Busstopprivate instance variable inflow'natpublic explicit operation City()'(() ==> City)public explicit operation addBusstop(BusStops)'(BusStops ==> Busstop)public explicit operation addWaypoint(WaypointsEnum)'(WaypointsEnum ==> Waypoint)public explicit operation addRoad(Waypoint, Waypoint, RoadNumber, nat)'(Waypoint * Waypoint * RoadNumber * nat ==> ())public explicit operation addRoad(Waypoint, Waypoint, RoadNumber, nat, nat)'(Waypoint * Waypoint * RoadNumber * nat * nat ==> ())public explicit operation addBus(nat, seq of (RoadNumber))'(nat * seq of (RoadNumber) ==> Bus)private explicit operation findRoadsFromRoadNumber(seq of (RoadNumber))'(seq of (RoadNumber) ==> seq of (Road))public explicit operation getCentralStation()'(() ==> Busstop)public explicit operation setInflow(nat)'(nat ==> ())public explicit operation getInflow()'(() ==> nat)public explicit operation getBuses()'(() ==> set of (Bus))public explicit operation WaitForThreadStart()'(() ==> ())private explicit operation ThreadStarted()'(() ==> ())private permission predicate 'boolprotected thread thread'?end Cityclass gui_Graphicspublic explicit operation init()'(() ==> ())public explicit operation busInRouteTo(nat, seq of (char), seq of (char), nat)'(nat * seq of (char) * seq of (char) * nat ==> ())public explicit operation move()'(() ==> ())public explicit operation sleep()'(() ==> ())public explicit operation passengerAtCentral(nat, seq of (char))'(nat * seq of (char) ==> ())public explicit operation passengerAnnoyed(nat)'(nat ==> ())public explicit operation passengerGotOnBus(nat)'(nat ==> ())public explicit operation inflowChanged(nat)'(nat ==> ())public explicit operation busAdded(nat)'(nat ==> ())public explicit operation busStopping(nat)'(nat ==> ())public explicit operation busPassengerCountChanged(nat, nat)'(nat * nat ==> ())end gui_Graphicsclass Busstop is subclass of Waypointprivate instance variable waiting'set of (Passenger)public explicit operation Busstop(BusStops)'(BusStops ==> Busstop)public explicit operation GetWaitingCount()'(() ==> nat)public explicit operation GetWaiting()'(() ==> set of (Passenger))public explicit operation GetWaitingOn(seq of (Waypoint))'(seq of (Waypoint) ==> set of (Passenger))public explicit operation AddPassenger(Passenger)'(Passenger ==> ())public explicit operation PassengerLeft(set of (Passenger))'(set of (Passenger) ==> ())private mutex predicate '?end Busstop
