RESULT:result:-1:-1,-1:class MessageChannelprivate instance variable data'[((unresolved POP3Types`ClientCommand) | (unresolved POP3Types`ServerResponse))]private instance variable io'(unresolved MessageChannel`IO)private instance variable debug'boolprivate explicit operation Send'(((unresolved POP3Types`ClientCommand) | (unresolved POP3Types`ServerResponse)) ==> ())private explicit operation Listen'(() ==> ((unresolved POP3Types`ClientCommand) | (unresolved POP3Types`ServerResponse)))public explicit operation ServerSend'((unresolved POP3Types`ServerResponse) ==> ())public explicit operation ClientListen'(() ==> (unresolved POP3Types`ServerResponse))public explicit operation ClientSend'((unresolved POP3Types`ClientCommand) ==> ())public explicit operation ServerListen'(() ==> (unresolved POP3Types`ClientCommand))private permission predicate 'boolprivate permission predicate 'boolprivate permission predicate 'boolprivate permission predicate 'boolend MessageChannelclass POP3ClientHandlerstatic private type ServerState'ServerStatestatic private value unknownMessageMsg'seq of (char)static private value negativeStatusMsg'seq of (char)static private value alreadyDeletedMsg'seq of (char)static private value deleteFailMsg'seq of (char)static private value maildropLockedMsg'seq of (char)static private value maildropReadyMsg'seq of (char)static private value passwordFailedMsg'seq of (char)static private value quitMsg'seq of (char)static private value submitPasswordMsg'seq of (char)private instance variable ss'(unresolved POP3ClientHandler`ServerState)private instance variable parent'(unresolved POP3ClientHandler`POP3Server)private instance variable user'(unresolved POP3Types`UserName)private instance variable msgChannel'(unresolved POP3ClientHandler`MessageChannel)private instance variable id'(unresolved POP3Server`ClientHandlerId)private instance variable lastWasUser'boolpublic explicit operation POP3ClientHandler'((unresolved POP3ClientHandler`POP3Server) * (unresolved POP3ClientHandler`MessageChannel) ==> (unresolved POP3ClientHandler`POP3ClientHandler))private explicit operation ReceiveCommand'((unresolved POP3Types`ClientCommand) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveQUIT'((unresolved POP3Types`QUIT) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveSTAT'((unresolved POP3Types`STAT) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveLIST'((unresolved POP3Types`LIST) ==> (unresolved POP3Types`ServerResponse))private explicit function MakeScanListHeader'(set of ((unresolved POP3Server`MessageInfo)) -> seq of (char))private explicit function set2seq'(set of (@tp) -> seq of (@tp))private explicit function MakeScanListing'(set of ((unresolved POP3Server`MessageInfo)) -> seq of (char))private explicit function MakeMultilineResponse'(seq of (seq of (char)) -> seq of (char))private explicit function MakeLineSeq'(seq of (char) -> seq of (seq of (char)))private explicit function GetLine'(seq of (char) -> ((seq of (char)) * (seq of (char))))private explicit function Len'((seq of (char) | seq of (seq of (char))) -> nat)private explicit function sum'(set of (nat) -> nat)private explicit function Card'(set of (nat) -> nat)private explicit operation ReceiveRETR'((unresolved POP3Types`RETR) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveDELE'((unresolved POP3Types`DELE) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveNOOP'((unresolved POP3Types`NOOP) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveRSET'((unresolved POP3Types`RSET) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveTOP'((unresolved POP3Types`TOP) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveUIDL'((unresolved POP3Types`UIDL) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceiveUSER'((unresolved POP3Types`USER) ==> (unresolved POP3Types`ServerResponse))private explicit operation ReceivePASS'((unresolved POP3Types`PASS) ==> (unresolved POP3Types`ServerResponse))static public explicit function int2string'(int -> seq of (char))static private explicit function Abs'(int -> nat)static private explicit function int2stringR'(nat -> seq of (char))static private explicit function Id'(nat -> nat)protected thread null'?end POP3ClientHandlerclass IOstatic public type filedirective'filedirectivestatic public explicit function writeval'(@p -> bool)static public explicit function fwriteval'(seq1 of (char) * @p * (unresolved IO`filedirective) -> bool)static public explicit function freadval'(seq1 of (char) -> (bool * [@p]))public explicit operation echo'(seq of (char) ==> bool)public explicit operation fecho'(seq of (char) * seq of (char) * [(unresolved IO`filedirective)] ==> bool)public explicit operation ferror'(() ==> seq of (char))static public explicit operation print'(? ==> ())static public explicit operation println'(? ==> ())static public explicit operation printf'(seq of (char) * seq of (?) ==> ())end IOclass MessageChannelBufferprivate instance variable data'[(unresolved MessageChannelBuffer`MessageChannel)]public explicit operation Put'((unresolved MessageChannelBuffer`MessageChannel) ==> ())public explicit operation Get'(() ==> (unresolved MessageChannelBuffer`MessageChannel))private permission predicate 'boolprivate permission predicate 'boolprivate mutex predicate '?private mutex predicate '?private mutex predicate '?end MessageChannelBufferclass POP3Typesstatic public type ClientCommand'ClientCommandstatic public type StandardClientCommand'StandardClientCommandstatic public type OptionalClientCommand'OptionalClientCommandstatic public type QUIT'QUITstatic public type STAT'STATstatic public type LIST'LISTstatic public type RETR'RETRstatic public type DELE'DELEstatic public type NOOP'NOOPstatic public type RSET'RSETstatic public type TOP'TOPstatic public type UIDL'UIDLstatic public type USER'USERstatic public type PASS'PASSstatic public type APOP'APOPstatic public type UserName'UserNamestatic public type Password'Passwordstatic public type ServerResponse'ServerResponsestatic public type OkResponse'OkResponsestatic public type ErrResponse'ErrResponseend POP3Typesclass POP3Serverstatic public type MessageInfo'MessageInfoprivate instance variable connChannel'(unresolved POP3Server`MessageChannelBuffer)private instance variable maildrop'(unresolved POP3Server`MailDrop)private instance variable passwords'map ((unresolved POP3Types`UserName)) to ((unresolved POP3Types`Password))private instance variable locks'map ((unresolved POP3Server`ClientHandlerId)) to ((unresolved POP3Types`UserName))private instance variable serverStarted'boolprivate invariant inv_POP3Server'boolstatic public type MailDrop'MailDropstatic public type MailBox'MailBoxstatic public type ClientHandlerId'ClientHandlerIdpublic explicit operation POP3Server'((unresolved POP3Server`MailDrop) * (unresolved POP3Server`MessageChannelBuffer) * map ((unresolved POP3Types`UserName)) to ((unresolved POP3Types`Password)) ==> (unresolved POP3Server`POP3Server))public explicit operation AuthenticateUser'((unresolved POP3Types`UserName) * (unresolved POP3Types`Password) ==> bool)public explicit operation IsLocked'((unresolved POP3Types`UserName) ==> bool)private explicit operation SetUserMessages'((unresolved POP3Types`UserName) * seq of ((unresolved POP3Server`POP3Message)) ==> ())private explicit operation GetUserMail'((unresolved POP3Types`UserName) ==> (unresolved POP3Server`MailBox))private mutex predicate '?private mutex predicate '?private explicit operation GetUserMessages'((unresolved POP3Types`UserName) ==> seq of ((unresolved POP3Server`POP3Message)))public explicit operation RemoveDeletedMessages'((unresolved POP3Types`UserName) ==> bool)public explicit operation AcquireLock'((unresolved POP3Server`ClientHandlerId) * (unresolved POP3Types`UserName) ==> ())public explicit operation ReleaseLock'((unresolved POP3Server`ClientHandlerId) ==> ())private mutex predicate '?private mutex predicate '?private mutex predicate '?private explicit operation CreateClientHandler'((unresolved POP3Server`MessageChannel) ==> ())public explicit operation IsMessageNumber'((unresolved POP3Types`UserName) * nat ==> bool)public explicit operation IsValidMessageNumber'((unresolved POP3Types`UserName) * nat ==> bool)public explicit operation MessageIsDeleted'((unresolved POP3Types`UserName) * nat ==> bool)public explicit operation DeleteMessage'((unresolved POP3Types`UserName) * nat ==> ())public explicit operation GetMsgHeader'((unresolved POP3Types`UserName) * nat ==> seq of (char))public explicit operation GetMsgBody'((unresolved POP3Types`UserName) * nat ==> seq of (char))public explicit operation ResetDeletedMessages'((unresolved POP3Types`UserName) ==> ())public explicit operation GetMessageText'((unresolved POP3Types`UserName) * nat ==> seq of (char))public explicit operation GetMessageSize'((unresolved POP3Types`UserName) * nat ==> nat)public explicit operation GetMessageInfo'((unresolved POP3Types`UserName) * [nat] ==> set of ((unresolved POP3Server`MessageInfo)))public explicit operation GetUidl'((unresolved POP3Types`UserName) * nat ==> seq of (char))public explicit operation GetAllUidls'((unresolved POP3Types`UserName) ==> seq of (seq of (char)))public explicit operation GetNumberOfMessages'((unresolved POP3Types`UserName) ==> nat)public explicit operation GetMailBoxSize'((unresolved POP3Types`UserName) ==> nat)public explicit operation GetChannel'(() ==> (unresolved POP3Server`MessageChannelBuffer))public explicit function sumseq'(seq of (nat) -> nat)private explicit function Len'(seq of (nat) -> nat)protected thread null'?public explicit operation WaitForServerStart'(() ==> ())private permission predicate 'boolend POP3Serverclass POP3Teststatic private value users'seq of ((unresolved POP3Types`UserName))static private value passwords'seq of ((unresolved POP3Types`Password))static private value headers'seq of (seq of (char))static private value bodies'seq of (seq of (char))public explicit function MakePasswordMap'(() -> map ((unresolved POP3Types`UserName)) to ((unresolved POP3Types`Password)))public explicit function MakeMailDrop'(() -> (unresolved POP3Server`MailDrop))public explicit function MakeMessages'((unresolved POP3Types`UserName) -> seq of ((unresolved POP3Test`POP3Message)))private explicit function TestRun1'(() -> seq of ((unresolved POP3Types`ClientCommand)))private instance variable server'(unresolved POP3Test`POP3Server)private instance variable ch'(unresolved POP3Test`MessageChannelBuffer)private instance variable mc1'(unresolved POP3Test`MessageChannel)private instance variable mc2'(unresolved POP3Test`MessageChannel)private instance variable mc3'(unresolved POP3Test`MessageChannel)private instance variable send1'(unresolved POP3Test`POP3TestSender)private instance variable send2'(unresolved POP3Test`POP3TestSender)private instance variable listen1'(unresolved POP3Test`POP3TestListener)private instance variable listen2'(unresolved POP3Test`POP3TestListener)public explicit operation StartServer'((unresolved POP3Test`POP3Server) ==> ())public explicit operation Test1'(() ==> ())public explicit operation Test2'(() ==> ())private explicit operation Start'(((unresolved POP3Test`POP3TestListener) | (unresolved POP3Test`POP3TestSender)) ==> ())public explicit operation POP3Test'(() ==> (unresolved POP3Test`POP3Test))public trace '(() ==> ())end POP3Testclass POP3TestSenderprivate instance variable id'seq of (char)private instance variable cmds'seq of ((unresolved POP3Types`ClientCommand))private instance variable mc'(unresolved POP3TestSender`MessageChannel)public explicit operation POP3TestSender'(seq of (char) * seq of ((unresolved POP3Types`ClientCommand)) * (unresolved POP3TestSender`MessageChannel) ==> (unresolved POP3TestSender`POP3TestSender))private explicit operation LogClient'((unresolved POP3Types`ClientCommand) ==> ())private explicit operation SendCmd'((unresolved POP3TestSender`MessageChannel) * (unresolved POP3Types`ClientCommand) ==> ())protected thread null'?end POP3TestSenderclass POP3TestListenerprivate instance variable id'seq of (char)private instance variable mc'(unresolved POP3TestListener`MessageChannel)private instance variable finished'boolpublic explicit operation POP3TestListener'(seq of (char) * (unresolved POP3TestListener`MessageChannel) ==> (unresolved POP3TestListener`POP3TestListener))private explicit operation LogServer'((unresolved POP3Types`ServerResponse) ==> ())public explicit operation IsFinished'(() ==> ())private permission predicate 'boolprotected thread null'?end POP3TestListenerclass POP3Messageprivate instance variable header'seq of (char)private instance variable body'seq of (char)private instance variable deleted'boolprivate instance variable uniqueId'seq of (char)public explicit operation POP3Message'(seq of (char) * seq of (char) * seq of (char) ==> (unresolved POP3Message`POP3Message))public explicit operation GetBody'(() ==> seq of (char))public explicit operation GetHeader'(() ==> seq of (char))public explicit operation GetText'(() ==> seq of (char))public explicit operation Delete'(() ==> (unresolved POP3Message`POP3Message))public explicit operation IsDeleted'(() ==> bool)public explicit operation Undelete'(() ==> (unresolved POP3Message`POP3Message))public explicit operation GetSize'(() ==> nat)public explicit operation GetUniqueId'(() ==> seq of (char))end POP3Message
