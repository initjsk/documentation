\section{CRSystem}

\begin{vdm_al}
system CRSystem

instance variables

-- cpu for TPC
cpu1 : CPU := new CPU (<FCFS>,1E12);


-- cpu for APM
cpu2 : CPU := new CPU (<FCFS>,2800E6);

-- cpu for the controller
cpu3 : CPU := new CPU (<FCFS>,1E12);
--cpu for the SMSGateway
cpu4 : CPU := new CPU (<FCFS>,1E20);
-- bus to connect SMSGateway to APM
bus4 : BUS := new BUS (<FCFS>,1E12,{cpu4,cpu2});
--bus5 : BUS := new BUS (<FCFS>,1E3,{cpu4,cpu5});
-- bus to connect TPC and APM
bus1 : BUS := new BUS (<FCFS>,1E3,{cpu1,cpu2});
-- bus to connect Controller and APM
bus2 : BUS := new BUS (<FCFS>,1E3,{cpu2,cpu3});
-- bust to connect Controller and TPC
bus3 : BUS := new BUS (<FCFS>,1E3,{cpu1,cpu3});


cpu7 : CPU := new CPU(<FCFS>,105E6);


bus7 : BUS := new BUS(<FCFS>,1E18,{cpu2,cpu7});


bus8 : BUS := new BUS(<FCFS>,1E18,{cpu4,cpu7});


--Token Device set up generated by repeater
--cpu5 : CPU := new CPU(<FCFS>,105E6);
--bus6 : BUS := new BUS(<FCFS>,5,{cpu5,cpu2});

--public static tok0 : TokenDevice := new TokenDevice(0);
public static tok7 : TokenDevice := new TokenDevice(0);


public static cb : TPC := new TPC();
public static apm : ActivePlanManager := new ActivePlanManager();
public static grid :  RailwayGrid := new RailwayGrid();
public static grid2 :  RailwayGrid := new RailwayGrid();
public static ctrl : Controller := new Controller();
public static sms : SMSGateway := new SMSGateway();

operations

CRSystem : () ==> CRSystem
CRSystem()==
(
	cpu1.deploy(cb);
	cpu1.deploy(grid2);
	cpu3.deploy(grid);
	cpu3.deploy(ctrl);
	cpu2.deploy(apm);
	cpu4.deploy(sms);
	
	cpu7.deploy(tok7);



)

end CRSystem
\end{vdm_al}
