\begin{vdm}\kClass $AreaControllerTest$ \kISO $TestCase$\index{AreaControllerTest|ClassDef}
\par
\kOperations
\kw{\kw{protected}}\begin{op}[e]{SetUp}\index{SetUp|FuncDef}%
\signature{() \Oto ()}
\parms{}
\annlab[o]{AreaControllerTest`SetUp}
\begin{blockstmt}
ORAMS`a1.\call{addEquipment}{ORAMS`f1} ; \\
ORAMS`a1.\call{addEquipment}{ORAMS`f2} ; \\
ORAMS`a1.\call{addEquipment}{ORAMS`f3}
\end{blockstmt};
\end{op}
\kw{\kw{protected}}\begin{op}[e]{RunTest}\index{RunTest|FuncDef}%
\signature{() \Oto ()}
\parms{}
\annlab[o]{AreaControllerTest`RunTest}
\begin{blockstmt}
\call{AssertTrue}{\fnapply{ORAMS`a1.getId}{} = \reccons{\kw{mk\textunderscore} \Token}{\const{a1}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p1.getArea}{} = \Nil } ; \\
\call{AssertFalse}{\fnapply{ORAMS`a1.enterPerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}},\const{Stay}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p1.getArea}{} = \Nil } ; \\
ORAMS`a1.\call{addBoat}{ORAMS`l1} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.enterPerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}},\const{Stay}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p1.getArea}{} = \reccons{\kw{mk\textunderscore} \Token}{\const{a1}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p1.getBoat}{} = \fnapply{ORAMS`l1.getId}{}} ; \\
\call{AssertFalse}{\fnapply{ORAMS`a1.canRemoveBoat}{\fnapply{ORAMS`l1.getId}{}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.enterPerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p2}},\const{Transit}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p2.getArea}{} = \reccons{\kw{mk\textunderscore} \Token}{\const{a1}}} ; \\
ORAMS`a2.\call{addEquipment}{ORAMS`f4} ; \\
ORAMS`a2.\call{addBoat}{ORAMS`l3} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a2.enterPerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p2}},\const{Stay}}} ; \\
\call{AssertFalse}{\fnapply{ORAMS`p2.getArea}{} = \reccons{\kw{mk\textunderscore} \Token}{\const{a1}}} ; \\
ORAMS`a1.\call{addBoat}{ORAMS`l3} ; \\
ORAMS`a1.\call{changeBoat}{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p1.getBoat}{} = \fnapply{ORAMS`l3.getId}{}} ; \\
\call{AssertTrue}{\fnapply{\fnapply{ORAMS`Lifeboats\index{Lifeboats|FuncOcc}}{\fnapply{ORAMS`l1.getId}{}}.getCrew}{} \Inter \set{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}}} = \set{}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.canRemoveBoat}{\fnapply{ORAMS`l1.getId}{}}} ; \\
ORAMS`a1.\call{removeBoat}{\fnapply{ORAMS`l1.getId}{}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`l1.getAreas}{} \Inter \set{\reccons{\kw{mk\textunderscore} \Token}{\const{a1}}} = \set{}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.canRemoveEquipment}{}} ; \\
ORAMS`a1.\call{removeEquipment}{ORAMS`f3} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.canRemoveEquipment}{}} ; \\
ORAMS`a1.\call{removeEquipment}{ORAMS`f2} ; \\
\call{AssertFalse}{\fnapply{ORAMS`a1.canRemoveEquipment}{}} ; \\
ORAMS`a2.\call{leave}{\reccons{\kw{mk\textunderscore} \Token}{\const{p2}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a2.enterPerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}},\const{Transit}}} ; \\
ORAMS`a2.\call{leave}{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a2.canRemoveBoat}{\fnapply{ORAMS`l3.getId}{}}} ; \\
ORAMS`a2.\call{removeBoat}{\fnapply{ORAMS`l3.getId}{}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.canRemoveBoat}{\fnapply{ORAMS`l3.getId}{}}} ; \\
ORAMS`a1.\call{removeBoat}{\fnapply{ORAMS`l3.getId}{}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a1.canRemoveEquipment}{}} ; \\
ORAMS`a1.\call{removeEquipment}{ORAMS`f1} ; \\
\call{AssertTrue}{\fnapply{ORAMS`a2.canRemoveEquipment}{}} ; \\
ORAMS`a1.\call{removeEquipment}{ORAMS`f4} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p1.getBoat}{} = \reccons{\kw{mk\textunderscore} \Token}{\const{b3}}} ; \\
\call{AssertTrue}{\fnapply{ORAMS`p2.getBoat}{} = \reccons{\kw{mk\textunderscore} \Token}{\const{b3}}} ; \\
ORAMS`l3.\call{removePerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p1}}} ; \\
ORAMS`l3.\call{removePerson}{\reccons{\kw{mk\textunderscore} \Token}{\const{p2}}}
\end{blockstmt};
\end{op}
\kw{\kw{protected}}\begin{op}[e]{TearDown}\index{TearDown|FuncDef}%
\signature{() \Oto ()}
\parms{}
\annlab[o]{AreaControllerTest`TearDown}
\begin{blockstmt}
\Skip 
\end{blockstmt}
\end{op}
\kEnd $AreaControllerTest$

\end{vdm}


































































