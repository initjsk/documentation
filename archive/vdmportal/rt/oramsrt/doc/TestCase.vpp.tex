\begin{vdm}\kClass $TestCase$ \kISO $Test$\index{TestCase|ClassDef}
\par
\kInstanceVarDef
\parlinebr
\begin{insvar}
\assdef{name}{\seqof*{\Char }}
\end{insvar}
\par
\kOperations
\kw{\kw{public}}\begin{op}[e]{TestCase}\index{TestCase|FuncDef}%
\signature{\seqof*{\Char } \Oto TestCase\index{TestCase|TypeOcc}}
\parms{nm}
\annlab[o]{TestCase`TestCase}
\ass{name}{nm};
\end{op}
\kw{\kw{public}}\begin{op}[e]{GetName}\index{GetName|FuncDef}%
\signature{() \Oto \seqof*{\Char }}
\parms{}
\annlab[o]{TestCase`GetName}
\return{name};
\end{op}
\kw{\kw{protected}}\begin{op}[e]{AssertTrue}\index{AssertTrue|FuncDef}%
\signature{\Bool  \Oto ()}
\parms{pb}
\annlab[o]{TestCase`AssertTrue}
\If  \Not pb
\Then \\
\exit{\const{FAILURE}}
\Fi;
\end{op}
\kw{\kw{protected}}\begin{op}[e]{AssertFalse}\index{AssertFalse|FuncDef}%
\signature{\Bool  \Oto ()}
\parms{pb}
\annlab[o]{TestCase`AssertFalse}
\If pb
\Then \\
\exit{\const{FAILURE}}
\Fi;
\end{op}
\kw{\kw{public}}\begin{op}[e]{Run}\index{Run|FuncDef}%
\signature{TestResult\index{TestResult|TypeOcc} \Oto ()}
\parms{ptr}
\annlab[o]{TestCase`Run}
\trap{\const{FAILURE}} \\
{\ $ptr$.\call{AddFailure}{\kSelf }}
\begin{blockstmt}
\call{SetUp}{} ; \\
\call{RunTest}{} ; \\
\call{TearDown}{}
\end{blockstmt};
\end{op}
\kw{\kw{protected}}\begin{op}[e]{SetUp}\index{SetUp|FuncDef}%
\signature{() \Oto ()}
\parms{}
\annlab[o]{TestCase`SetUp}
\issubclassresp;
\end{op}
\kw{\kw{protected}}\begin{op}[e]{RunTest}\index{RunTest|FuncDef}%
\signature{() \Oto ()}
\parms{}
\annlab[o]{TestCase`RunTest}
\issubclassresp;
\end{op}
\kw{\kw{protected}}\begin{op}[e]{TearDown}\index{TearDown|FuncDef}%
\signature{() \Oto ()}
\parms{}
\annlab[o]{TestCase`TearDown}
\issubclassresp
\end{op}
\kEnd $TestCase$

\end{vdm}







































