class BatteryMonitor is subclass of GLOBAL

instance variables

private maxBatteryLife : nat;
private batteryLife : nat;

operations

public BatteryMonitor: nat ==> BatteryMonitor
BatteryMonitor(maxBattery) == 
(
   maxBatteryLife := maxBattery;
   batteryLife := maxBattery
);

public drain: nat ==> ()
drain(drainVolume) == 
(
    if (batteryLife - drainVolume) < 0 then
        batteryLife := 0
    else
        batteryLife := batteryLife - drainVolume;
);

public getBatteryLife: () ==> nat
getBatteryLife() == return batteryLife;

public recharge: () ==> ()
recharge() == batteryLife:= maxBatteryLife;

sync

mutex(drain);
mutex(drain, getBatteryLife, recharge);

per drain => batteryLife > 0

end BatteryMonitor
